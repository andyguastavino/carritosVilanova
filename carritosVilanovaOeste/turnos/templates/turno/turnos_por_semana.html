{% extends 'base.html' %}

{% block content %}
{% load custom_filters %}



<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }
    th, td {
        border: 1px solid #000;
        padding: 5px;
        text-align: left;
    }
</style>
<h1>{{ datos_semanales.1.1|mes_es}}</h1>

{% for inicio, fin, dias_semana, sitios in datos_semanales %}
<h2>Semana del {{ inicio|date:"d" }} al {{ fin|date:"d" }}</h2>
<table>
    <thead>
        <tr>
            <th rowspan="2">Sitio</th>
            <th rowspan="2">Franja Horaria</th>
            {% for dia in dias_semana %}
            <th>{{ dia|date:"l"|dia_semana_es }} {{ dia|date:"d" }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for sitio, franjas in sitios.items %}
            {% for franja, dias in franjas.items %}
                <tr>
                    {% if forloop.first %}
                        <td rowspan="{{ franjas|length }}">{{ sitio.nombre }}</td>
                    {% endif %}
                    <td>{{ franja.nombre }}</td>
                    {% for dia in dias.values %}
                        <td>
                            {% for turno in dia %}
                                {{ turno.capitan }}<br>
                                {% for asistente in turno.asistentes.all %}
                                    {{ asistente }}<br>
                                {% endfor %}
                            {% endfor %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        {% endfor %}
    </tbody>
</table>
{% endfor %}
{% endblock %}
