{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <h1 class="mb-4">Listado de Turnos</h1>
  <table class="table table-bordered table-striped">
      <thead class="table-dark">
          <tr>
              <th>#</th>
              <th>Fecha</th>
              <th>Día de la Semana</th>
              <th>Franja Horaria</th>
              <th>Sitio</th>
              <th>Capitán</th>
              <th>Asistentes</th>
              <th>Activo</th>
          </tr>
      </thead>
      <tbody>
          {% for turno in turnos %}
          <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ turno.fecha|date:"d/m/Y" }}</td>
              <td>{{ turno.dia_semana }}</td>
              <td>{{ turno.franja_horaria }}</td>
              <td>{{ turno.sitio }}</td>
              <td>{{ turno.capitan }}</td>
              <td>
                  {% if turno.asistentes.exists %}
                      <ul>
                          {% for asistente in turno.asistentes.all %}
                              <li>{{ asistente }}</li>
                          {% endfor %}
                      </ul>
                  {% else %}
                      <span>No hay asistentes</span>
                  {% endif %}
              </td>
              <td>{{ turno.activo|yesno:"Sí,No" }}</td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="8" class="text-center">No hay turnos disponibles.</td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
  <a href="{% url 'turno_create' %}">Añadir Nuevo Turno</a>
</div> 
{% endblock %}
